{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/chromosomes/Neural3L.ts","webpack:///./src/chromosomes/chromosomes.ts","webpack:///./src/common/CircularList.ts","webpack:///./src/common/EntityTypes.ts","webpack:///./src/common/EventTypes.ts","webpack:///./src/common/SceneObject.ts","webpack:///./src/common/common.ts","webpack:///./src/main.ts","webpack:///./src/ui/FlyCameraControls.ts","webpack:///./src/ui/MainPanel.ts","webpack:///./src/ui/SceneManager.ts","webpack:///./src/ui/Ui.ts","webpack:///./src/world/World.ts","webpack:///./src/world/creatures/Creature.ts","webpack:///./src/world/creatures/Rabbit.ts","webpack:///./src/world/creatures/creatures.ts","webpack:///./src/world/idfactory/IdFactory.ts","webpack:///external \"THREE\""],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","import {Chromosome} from \"./Chromosome\"\n\nconst LAYER_DEFAULT_SIZE = 3;\n\nexport class Neural3L implements Chromosome{\n  private inputSize:number;\n  private innerLayerSize:number;\n  private outputSize:number;\n  private inputLayer:Float32Array;\n  private innerLayer:Float32Array;\n  private outputLayer:Float32Array;\n  private M1:Array<Float32Array>;\n  private M2:Array<Float32Array>;\n  private activationFunction = (x:number)=>{return 1.2*x/(Math.abs(x)+0.5)};\n\n  constructor(options:{inputSize?:number, innerSize?:number, outputSize?:number}){\n    this.inputSize = options[\"inputSize\"] || LAYER_DEFAULT_SIZE;\n    this.innerLayerSize = options[\"innerSize\"] || LAYER_DEFAULT_SIZE;\n    this.outputSize = options[\"outputSize\"] || LAYER_DEFAULT_SIZE;\n    this.inputLayer = new Float32Array(this.inputSize);\n    this.innerLayer = new Float32Array(this.innerLayerSize);\n    this.outputLayer = new Float32Array(this.outputSize);\n    this.M1 = new Array(this.innerLayerSize);\n    this.M2 = new Array(this.outputSize);\n    for (var i = 0; i < this.innerLayerSize; i++){\n      this.M1[i] = new Float32Array(this.inputSize);\n    }\n    for (var i = 0; i < this.outputSize; i++){\n      this.M2[i] = new Float32Array(this.innerLayerSize);\n    }\n  }\n\n  setInput(input:ArrayBuffer){\n    var inputFloat = new Float32Array(input);\n    if(inputFloat.length< this.inputSize){\n      this.inputLayer.fill(0);\n      this.inputLayer.set(inputFloat);\n    }else{\n      this.inputLayer.set(inputFloat);\n    }\n  };\n\n  calculateMatrix(input:Float32Array, output:Float32Array, Matrix:Array<Float32Array>){\n      for(let i = 0; i < output.length; i++){\n          var s = 0;\n          for(let j = 0; j < input.length; j++){\n              s += input[j]*Matrix[i][j];\n          }\n          output[i] = this.activationFunction(s);\n      }\n  }\n\n  process(){\n    this.calculateMatrix(this.inputLayer, this.innerLayer, this.M1);\n    this.calculateMatrix(this.innerLayer, this.outputLayer, this.M2);\n    return this.outputLayer.buffer;\n  };\n\n  public randomize(){\n    this.iterateData((value)=>{\n      return Math.random()-0.5;\n    });\n    return this;\n  }\n  public mutate(count = 1, power = 0.5){\n    var dataArray = this.getDataAsArray();\n    for(var i = 0; i< count; i++){\n      dataArray[Math.floor(Math.random() * dataArray.length)] += Math.random() * power;\n    }\n    this.setDataFromArray(dataArray);\n    return this;\n  }\n\n  public getDataAsArray():number[]{\n    var res:number[] = [];\n    this.iterateData((value)=>{\n      res.push(value);\n      return value;\n    });\n    return res;\n  }\n\n  public setDataFromArray(data:number[]){\n    var dataIndex = 0;\n    this.iterateData((value)=>{\n      return data[dataIndex++];\n    });\n  }\n\n  public cross(chromosome:Neural3L){\n    var options = {inputSize:this.inputSize, innerSize:this.innerLayerSize, outputSize:this.outputSize};\n    var newChromosome = new Neural3L(options);\n    var data1 = this.getDataAsArray();\n    var data2 = chromosome.getDataAsArray();\n    var crossIndexes = [Math.floor(Math.random()*data1.length),\n                        Math.floor(Math.random()*data1.length)].sort();\n    for(var i = crossIndexes[0]; i< crossIndexes[1]; i++){\n      data1[i] = data2[i];\n    }\n    newChromosome.setDataFromArray(data1);\n    return newChromosome;\n  }\n\n  public computeDistance(partner:Neural3L){\n    var myData = this.getDataAsArray();\n    var partnerData = partner.getDataAsArray();\n    if(myData.length != partnerData.length){\n      return 1;\n    }\n    var differents = 0;\n    for(var i = 0; i < myData.length; i++){\n      if(myData[i] != partnerData[i]){\n        differents++;\n      }\n    }\n    return differents/myData.length;\n  }\n\n  private iterateData(callback:(element:number)=>number){\n    for (var i = 0; i < this.innerLayerSize; i++){\n      for(var j = 0; j< this.M1[i].length; j++){\n        this.M1[i][j] = callback(this.M1[i][j]);\n      }\n    }\n    for (var i = 0; i < this.outputSize; i++){\n      for(var j = 0; j< this.M2[i].length; j++){\n        this.M2[i][j] = callback(this.M2[i][j]);\n      }\n    }\n  }\n\n}\n","export * from \"./Chromosome\";\nexport * from \"./Neural3L\";\n","\n//I coud not find a good typescript implementation on the npm fo me\nexport class CircularListNode<T>{\n   value:T;\n   next:CircularListNode<T>;\n   prev:CircularListNode<T>;\n  constructor(value:T, prev?:CircularListNode<T>, next?:CircularListNode<T>){\n    this.value = value;\n    this.next = next || this;\n    this.prev = prev || this;\n  }\n}\n\nexport class CircularList<T>{\n  private lastAddedNode:CircularListNode<T>|undefined;\n  private size:number = 0;\n\n  private _addAfter(value:T, prevNode:CircularListNode<T>){\n    var nextNode = prevNode.next;\n    var newNode = new CircularListNode(value, prevNode, nextNode);\n    prevNode.next = newNode;\n    nextNode.prev = newNode;\n    this.size++;\n    this.lastAddedNode = newNode;\n  }\n\n  public getSize(){\n    return this.size;\n  }\n\n  public getLastAddedNode(){\n    return this.lastAddedNode;\n  }\n\n  public add(value:T, prevNode?:CircularListNode<T>){\n    if(this.size > 0 && this.lastAddedNode){//\n      var placeToAddAfter = prevNode || this.lastAddedNode;\n      this._addAfter(value, placeToAddAfter);\n    }else{\n      this.lastAddedNode = new CircularListNode(value);\n      this.size = 1;\n    }\n  }\n\n  public forEach(func:(node:T)=>void){\n    var startNode = this.lastAddedNode;\n    if(!startNode)return;\n    func(startNode.value);\n    var node = startNode.next;\n    while(node != startNode){\n      func(node.value);\n      node = node.next;\n    }\n  }\n\n  public filterToArray(func:(value:T)=>boolean):T[]{\n    var result:T[] = [];\n    this.forEach((elem)=>{\n      if(func(elem)){\n        result.push(elem);\n      }\n    });\n    return result;\n  }\n\n  public delete(node:CircularListNode<T>){\n    this.size--;\n    if(this.lastAddedNode === node){\n      this.lastAddedNode = this.lastAddedNode.prev;\n    }\n    if(this.size > 0){\n      node.prev.next = node.next;\n      node.next.prev = node.prev;\n    }else{\n      this.lastAddedNode = undefined;\n    }\n  }\n\n}\n","export namespace EntityTypes {\n  export const UNKNOWN = 0;\n  export const RABBIT_M = 1;\n  export const RABBIT_F = 2;\n  export const FOOD_GRASS = 3;\n}\n","export namespace EventTypes {\n  export const UNKNOWN = 0;\n  export const BTN_RANDOM_SPAWN = 1;\n  export const BTN_DOUBLE_ALIVE = 2;\n  export const CHECKBOX_AUTO_CLONE = 3\n}\n","\nexport class SceneObject{\n  public id = 0;\n  public posX = 0;\n  public posY = 0;\n  public type:number = 0;\n}\n","export * from \"./SceneObject\";\nexport * from \"./CircularList\"\nexport * from \"./EntityTypes\";\n","import {Ui} from \"./ui/Ui\"\nimport {World} from \"./world/World\"\nimport {EventTypes} from \"./common/EventTypes\";\n\ndeclare const viewport:HTMLDivElement;\n\nvar ui:Ui;\nvar stats:Stats;\nvar world:World;\n\n\n\n\nfunction initialize(){\n //stats\n stats = new Stats();\n document.body.appendChild( stats.dom );\n ui = new Ui(viewport);\n ui.onUiEvent = UiController;\n //editor = new Editor(viewport);\n world = new World();\n world.load();\n\n animate();\n}\n\nwindow.onload = initialize;\n\n\nfunction animate() {\n\trequestAnimationFrame( animate );\n//\teditor.animate();\n\tworld.tickUpdate();\n  ui.update(world);\n  stats.update();\n\n}\n\nvar UiController = (eventType:number, payload?:any)=>{\n  switch(eventType){\n    case EventTypes.BTN_RANDOM_SPAWN:\n      world.spawnRandom(100);\n    break;\n\n    case EventTypes.BTN_DOUBLE_ALIVE:\n      world.doubleAliveCreatures();\n    break;\n\n    case EventTypes.CHECKBOX_AUTO_CLONE:\n      var autoDoubleLimit = (payload)?50:0;\n      world.setAutoDoubleCreaturesLimit(autoDoubleLimit);\n    break;\n\n    default:\n      throw new Error(\"UiController wrong event type:\" + eventType);\n    break;\n  }\n\n\n}\n","import * as THREE from \"three\";\n\nexport class FlyCameraControls{\n  private camera:THREE.Camera;\n  private domElement:HTMLElement;\n  private keysDown:Set<number>;\n  private forwardSpeed:number = 0;\n  private maxForwardSpeed = 0.02;\n  private forwardAcceleration = 0.0002;\n  private cameraDirection = new THREE.Vector3;\n  private mouseLeftPressed = false;\n  private mouseStartX =0;\n  private mouseStartY =0;\n  private mouseX = 0;\n  private mouseY = 0;\n  private MOUSE_SENSIVITY = 0.003;\n  private upVector = new THREE.Vector3(0,0,1);\n\n  public onCameraMoved =()=>{};\n\n\n  constructor(camera:THREE.Camera, domElement:HTMLElement){\n    this.camera = camera;\n    this.domElement = domElement;\n    this.keysDown = new Set<number>();\n    window.addEventListener( 'keydown', this.onKeyDown, false );\n    window.addEventListener( 'keyup', this.onKeyUp, false );\n    this.domElement.addEventListener( 'contextmenu', this.onContextMenu, false );\n    this.domElement.addEventListener( 'mousemove', this.onMouseMove, false );\n\t  this.domElement.addEventListener( 'mousedown', this.onMouseDown, false );\n\t  this.domElement.addEventListener( 'mouseup', this.onMouseUp, false );\n  }\n\n\n  dispose(){\n    window.removeEventListener( 'keydown', this.onKeyDown, false );\n    window.removeEventListener( 'keyup', this.onKeyUp, false );\n    this.domElement.removeEventListener( 'contextmenu', this.onContextMenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', this.onMouseMove, false );\n\t\tthis.domElement.removeEventListener( 'mousemove', this.onMouseDown, false );\n\t\tthis.domElement.removeEventListener( 'mouseup', this.onMouseUp, false );\n  }\n\n  tickUpdate(delta?:number){\n    delta = delta || 30;\n    //move\n    if(this.keysDown.has(87/* W */)){\n      this.forwardSpeed += this.forwardAcceleration;\n    }else  if(this.keysDown.has(83/* S */)){\n      this.forwardSpeed -= this.forwardAcceleration;\n    } else this.forwardSpeed = 0;\n    this.forwardSpeed = Math.min(this.forwardSpeed, this.maxForwardSpeed);\n    this.forwardSpeed = Math.max(this.forwardSpeed, -1*this.maxForwardSpeed);\n    var forward = this.forwardSpeed*delta;\n    this.camera.getWorldDirection(this.cameraDirection);\n    this.cameraDirection.normalize();\n    this.cameraDirection.multiplyScalar(delta*this.forwardSpeed);\n    this.camera.position.add(this.cameraDirection);\n    if(this.keysDown.has(65/* A */)){\n      this.camera.rotateOnWorldAxis(this.upVector, 0.01);\n    }else if(this.keysDown.has(68/* D */)){\n      this.camera.rotateOnWorldAxis(this.upVector,-0.01);\n    }\n    if(this.mouseLeftPressed){\n      this.camera.rotateOnWorldAxis(this.upVector,this.MOUSE_SENSIVITY*(this.mouseStartX-this.mouseX));\n      this.mouseStartX = this.mouseX;\n      this.camera.rotateX(this.MOUSE_SENSIVITY*(this.mouseStartY - this.mouseY));\n      this.mouseStartY = this.mouseY;\n    }\n    if(forward != 0){\n      this.onCameraMoved();\n    }\n  }\n\nprivate onKeyDown = (event:KeyboardEvent)=>{\n    this.keysDown.add(event.keyCode);\n  }\n\nprivate  onKeyUp = (event:KeyboardEvent)=>{\n    this.keysDown.delete(event.keyCode);\n  }\n\nprivate  onMouseDown = (event:MouseEvent)=>{\n    if(event.button == 2){\n      this.mouseStartX = event.clientX;\n      this.mouseStartY = event.clientY;\n      this.mouseX = event.clientX;\n      this.mouseY = event.clientY;\n      this.mouseLeftPressed = true;\n    }\n  }\n\nprivate  onMouseUp = (event:MouseEvent)=>{\n    if(event.button == 2){\n      this.mouseLeftPressed = false;\n    }\n  }\n\nprivate  onMouseMove = (event:MouseEvent)=>{\n    this.mouseX = event.clientX;\n    this.mouseY = event.clientY;\n  }\n\nprivate  onContextMenu = (event:MouseEvent)=>{\n    event.preventDefault();\n  }\n}\n","\nexport class MainPanel{\n  public domElement:HTMLDivElement;\n  private creaturesCountSpan:HTMLSpanElement;\n\n  public onBtnRandomSpawn:()=>void = function(){throw new Error(\"you should override MainPanel.onBtnRandomSpawn()\")};\n  public onBtnDoubleAlive:()=>void = function(){throw new Error(\"you should override MainPanel.onBtnRandomSpawn()\")};\n  public onCheckboxAutoCloneChange:(checked:boolean)=>void = function(){throw new Error(\"you should override MainPanel.onBtnRandomSpawn()\")};\n\n\n  constructor(){\n    this.domElement = document.createElement('div');\n    this.domElement.innerHTML = `Creatures:<span > - </span>\n    <button class = \"button1\">Spawn random</button>\n    <button class = \"button2\">Double alive</button>\n    <input type=checkbox class= \"checkbox1\"> Auto clone if < 50</input>`;\n    this.domElement.setAttribute(\"style\", `\n          position:fixed;\n          bottom:10px;\n          left:10px;\n          background-color:#AAFFFF;\n          padding:5px;\n          opacity:0.5`);\n\n    var btnRandomSpawn = <HTMLButtonElement> this.domElement.querySelector(\".button1\");\n    btnRandomSpawn.onclick = ()=>{this.onBtnRandomSpawn()};\n    var btnDoubleAlive =  <HTMLButtonElement> this.domElement.querySelector(\".button2\");\n    btnDoubleAlive.onclick = ()=>{this.onBtnDoubleAlive()};\n    this.creaturesCountSpan = <HTMLSpanElement> this.domElement.querySelector(\"span\");\n    var checkboxAutoClone = <HTMLInputElement> this.domElement.querySelector(\".checkbox1\");\n    checkboxAutoClone.onchange = ()=>{this.onCheckboxAutoCloneChange(checkboxAutoClone.checked)};\n  }\n\n  update(creatureCount:number){\n    this.creaturesCountSpan.innerHTML = String(creatureCount);\n  }\n\n\n}\n","import * as THREE from \"three\";\nimport {SceneObject, EntityTypes} from \"../common/common\";\n\n\nexport class SceneManager{\n  private scene:THREE.Scene;\n  private objectMeshes:Map<number, THREE.Mesh>;\n\n  constructor(scene:THREE.Scene){\n    this.scene = scene;\n    this.objectMeshes = new Map();\n  }\n\n  updateObjects(objects: SceneObject[]){\n    var updatedIds = new Set<number>();\n    for( var obj of objects){\n      var mesh = this.objectMeshes.get(obj.id);\n      if (!mesh) {\n        mesh = this.createMesh(obj.type);\n        this.objectMeshes.set(obj.id, mesh);\n        this.scene.add(mesh);\n      }\n      mesh.position.x = obj.posX;\n      mesh.position.y = obj.posY;\n      updatedIds.add(obj.id);\n    }\n    //delete\n    for(var el of this.objectMeshes){\n      if(!updatedIds.has(el[0])){\n        this.scene.remove(el[1]);\n        this.objectMeshes.delete(el[0]);\n      }\n    }\n  }\n\n  private createMesh(objectType:number){\n    var mesh:THREE.Mesh;\n    switch(objectType){\n      case EntityTypes.RABBIT_F:\n        mesh = new THREE.Mesh(new THREE.SphereGeometry(0.3),new THREE.MeshLambertMaterial( {\n              color: 0xFF7777 }));\n      break;\n\n      case EntityTypes.RABBIT_M:\n        mesh = new THREE.Mesh(new THREE.SphereGeometry(0.3),new THREE.MeshLambertMaterial( {\n              color: 0x115588 }) );\n      break;\n\n      case EntityTypes.FOOD_GRASS:\n        mesh = new THREE.Mesh(new THREE.PlaneBufferGeometry( 1, 1),new THREE.MeshLambertMaterial( {\n              color: 0x55AA55 }) );\n      break;\n\n      default:\n        mesh = new THREE.Mesh(new THREE.SphereGeometry(0.3),new THREE.MeshLambertMaterial( {\n              color: 0x111111 }) );\n      break;\n    }\n    return mesh;\n  }\n\n}\n","import {World} from \"../world/World\";\nimport {FlyCameraControls} from \"./FlyCameraControls\";\nimport {SceneManager} from \"./SceneManager\";\nimport {MainPanel} from \"./MainPanel\";\nimport {EventTypes} from \"../common/EventTypes\"\nimport * as THREE from \"three\";\n\nconst VISIBLE_DISTANCE = 1000;\n\nexport class Ui{\n  private viewport:HTMLDivElement;\n  private scene:THREE.Scene;\n  private camera: THREE.PerspectiveCamera;\n  private renderer: THREE.WebGLRenderer;\n  private sceneManager:SceneManager;\n  private cameraControls:FlyCameraControls;\n  private mainPanel:MainPanel;\n\n  public onUiEvent:(eventType:number, payload?:any)=>void = function(){throw new Error(\"you should override Ui.onUiEvent()\")};\n\n  constructor(viewport:HTMLDivElement){\n    this.viewport = viewport;\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 0.1, 10000 );\n    this.cameraControls = new FlyCameraControls(this.camera, viewport);\n    this.renderer = new THREE.WebGLRenderer( { antialias: true } );\n    this.sceneManager = new SceneManager(this.scene);\n    this.mainPanel = new MainPanel();\n    this.viewport.appendChild( this.renderer.domElement );\n    this.viewport.appendChild( this.mainPanel.domElement );\n    this.initialize();\n  }\n\n  private initialize(){\n   this.camera.up = new THREE.Vector3( 0, 0, 1 );\n   this.camera.position.set( 0, 0, 30 );\n   this.camera.lookAt(40,0,0);\n\n   // lights\n   this.scene.add( new THREE.AmbientLight( 0x333333 ) );\n   var light = new THREE.DirectionalLight( 0xffffff, 1 );\n         light.position.set( 10, 1, 100 );\n         this.scene.add( light );\n   this.renderer.setPixelRatio( window.devicePixelRatio );\n   this.renderer.setSize( window.innerWidth, window.innerHeight );\n\n   window.addEventListener( 'resize', this.onWindowResize.bind(this), false );\n   //0 cube\n   var cube = new THREE.Mesh(new THREE.CubeGeometry(1,1,1),new THREE.MeshPhongMaterial( {\n           color: 0x111155, shininess: 200,\n           side: THREE.DoubleSide }) );\n   this.scene.add(cube);\n   this.mainPanel.onBtnRandomSpawn = ()=>this.onUiEvent(EventTypes.BTN_RANDOM_SPAWN);\n   this.mainPanel.onBtnDoubleAlive = ()=>this.onUiEvent(EventTypes.BTN_DOUBLE_ALIVE);\n   this.mainPanel.onCheckboxAutoCloneChange = (val)=>this.onUiEvent(EventTypes.CHECKBOX_AUTO_CLONE, val);\n  }\n\n  private onWindowResize() {\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize( window.innerWidth, window.innerHeight );\n  }\n\n  public update(world:World){\n    this.cameraControls.tickUpdate();\n    this.sceneManager.updateObjects(world.getSceneObjectsNearXY(this.camera.position.x,\n                    this.camera.position.y, VISIBLE_DISTANCE));\n    var creatureCount = world.getAliveCreatureCount();\n    this.mainPanel.update(creatureCount);\n    this.renderer.render( this.scene, this.camera );\n  }\n\n\n}\n","import {Creature, Rabbit} from \"./creatures/creatures\";\nimport {SceneObject, CircularList, CircularListNode, EntityTypes} from \"../common/common\";\nimport {Entity} from \"./Entity\";\nimport {Neural3L} from \"../chromosomes/chromosomes\";\nimport {IdFactory} from \"./idfactory/IdFactory\";\n\nexport class World{\n  private processCreaturesQuotaPerTick = 0.3;\n  private creatures:CircularList<Creature>;\n  private currentCreatureNode:CircularListNode<Creature>|undefined;\n  private items:Array<Entity>;\n  private idFactory:IdFactory;\n  private tickNumber = 0;\n  private autoDoubleCreaturesLimit = 0;\n\n  constructor(){\n    this.creatures = new CircularList();\n    this.items = new Array();\n    this.idFactory = new IdFactory();\n  }\n\n  public tickUpdate(){\n    this.processCreatures();\n    if(this.getAliveCreatureCount() < this.autoDoubleCreaturesLimit){\n      this.doubleAliveCreatures();\n    }\n    if(this.tickNumber % 3 === 0){\n      var grassFood:Entity = {\n        id:this.idFactory.generateId(),\n        type: EntityTypes.FOOD_GRASS,\n        posX:Math.random()*50,\n        posY:Math.random()*50\n      }\n      this.items.push(grassFood);\n    }\n    this.tickNumber ++;\n  }\n\n  public getSceneObjectsNearXY(x:number, y:number, distance:number):SceneObject[]{\n    var entities = this.getNearEntities(x,y,distance);\n    return entities.map( entity=>{\n      return {id:entity.id, posX:entity.posX, posY: entity.posY, type:entity.type};\n    });\n\n  }\n\n  public load(){\n    for(var i=0; i < 1; i++){\n      var grassFood:Entity = {\n        id:this.idFactory.generateId(),\n        type: EntityTypes.FOOD_GRASS,\n        posX:Math.random()*50,\n        posY:Math.random()*50\n      }\n      this.items.push(grassFood);\n    }\n  }\n\n  public spawnRandom(quantity:number){\n    for(var i=0; i < quantity; i++){\n      var creature = new Rabbit(Math.round(Math.random()),\n            ()=>this.idFactory.generateId(),\n            (options)=>new Neural3L(options).randomize());\n      creature.posX = Math.random()*50;\n      creature.posY = Math.random()*50;\n      this.addCreature(creature);\n    }\n  }\n\n  public doubleAliveCreatures(){\n    var newCreatures:Creature[] = [];\n    this.creatures.forEach((creature)=>{\n      newCreatures.push(creature.clone(1,0.1));\n    });\n    for(var creature of newCreatures){\n      creature.posX = Math.random()*50;\n      creature.posY = Math.random()*50;\n      this.addCreature(creature);\n    }\n  }\n\n  public getAliveCreatureCount(){\n    return this.creatures.getSize();\n  }\n\n  public setAutoDoubleCreaturesLimit(limit:number){\n    this.autoDoubleCreaturesLimit = limit;\n  }\n\n  private processCreatures(){\n    var currentNode= this.currentCreatureNode || this.creatures.getLastAddedNode();\n    if(currentNode){\n      var processCount = Math.ceil(this.creatures.getSize()*this.processCreaturesQuotaPerTick);\n      for(var i=0; i< processCount; i++){\n        var creature = currentNode.value;\n        var nearEntities = this.getNearEntities(creature.posX, creature.posY, creature.visionRadius, creature);\n        creature.process(nearEntities);\n        if (!creature.isAlive){\n          this.creatures.delete(currentNode);\n        }\n        currentNode = currentNode.next;\n      }\n      if(this.creatures.getSize() === 0){\n        this.currentCreatureNode  = undefined;\n      }else{\n        this.currentCreatureNode = currentNode;\n      }\n\n    }\n  }\n\n  private getNearEntities(x:number , y:number, distance:number, excludeEntity?:Entity){\n    var distance2 = distance*distance;\n    var distanceFilter = function name(value:Entity) {\n      var dx = value.posX-x;\n      var dy = value.posY-y\n      return ((dx*dx + dy*dy <= distance2) && (excludeEntity != value));\n    }\n    var result:Entity[] = this.creatures.filterToArray(distanceFilter);\n    var nearItems = this.items.filter(distanceFilter)\n    result = result.concat(nearItems);\n    return result;\n  }\n\n  private deleteItem(entity:Entity){\n    var foundIndex = this.items.findIndex((el)=>(el.id === entity.id));\n    if(foundIndex < 0){\n      throw new Error(\"deleteItem: item not found \" + JSON.stringify(entity));\n    }\n    this.items[foundIndex] = this.items[this.items.length -1];\n    this.items.pop();\n  }\n\n  private addCreature(creature:Creature){\n    creature.onCreatureMade = this.addCreature.bind(this);\n    creature.onObjectPickup = this.deleteItem.bind(this);\n    this.creatures.add(creature);\n  }\n\n}\n","import {Entity} from \"../Entity\";\nimport {EntityTypes} from \"../../common/common\";\n\nexport class Creature implements Entity{\n  public id = 0;\n  public type = EntityTypes.UNKNOWN;\n  public posX = 0;\n  public posY = 0;\n  public visionRadius = 10;\n  public actRadius = 1;\n  public isAlive = true;\n\n  public onObjectPickup = function(entity:Entity){throw new Error(\"You should override onObjectPickup()\")};\n  public onCreatureMade = function(creature:Creature){throw new Error(\"You should override onCreatureMade()\")};\n\n  public process(nearEntities:Entity[]){\n  }\n\n  public onCoition(partner:Creature){\n  }\n\n  public setIdOnce(id:number){\n    if(id){\n      throw new Error(\"You can not set ID twice\")\n    }\n  }\n\n  public getId(){\n    return this.id;\n  }\n\n  public clone(mutationCount?:number, mutationPower?:number):Creature{\n    return new Creature();\n  }\n\n\n}\n","import {Creature} from \"./Creature\";\nimport {Entity} from \"../Entity\";\nimport {EntityTypes} from \"../../common/common\";\nimport {Chromosome} from \"../../chromosomes/Chromosome\"\n\nconst CHROMOSOME_INPUT_LENGHT = 100;\nconst MAX_VISIBLE_OBJECTS_COUNT = 10;\nconst MAX_AGE = 500;\nconst MIN_SEX_AGE = 60;\nconst MAX_SPEED = 0.5;\nconst MAX_HP = 50;\nconst MAX_FILL = 50;\nconst MAX_GESTATION_TIME = 50;\nconst VISION_RADIUS = 20;\n\nconst GRASS_FILL_POINTS = 25;\nconst CHROMOSOME_OUTPUT_LENGTH = 21;\n\nexport class Rabbit extends Creature{\n  private chromosome:Chromosome;\n  private healthPoints:number;\n  private fill:number;\n  private age = 0;\n  private attackPower = 1;\n  private defence = 1;\n  private gestationChromosome:Chromosome | undefined;\n  private gestationTime = 0;\n  private sexRequestedPartner:Rabbit | undefined;\n\n  private chromosomeInput:Float32Array;\n  private idFactoryMethod:()=>number;\n\n\n  constructor(sex:number, idFactoryMethod:()=>number, chromosomeFactory:(options:any)=>Chromosome){\n    super();\n    this.idFactoryMethod = idFactoryMethod;\n    this.id = idFactoryMethod();\n    this.chromosome = chromosomeFactory({\n       inputSize:CHROMOSOME_INPUT_LENGHT,\n       innerSize:CHROMOSOME_OUTPUT_LENGTH,\n       outputSize:CHROMOSOME_OUTPUT_LENGTH\n     });\n    this.type = (sex)?EntityTypes.RABBIT_M:EntityTypes.RABBIT_F;\n    this.healthPoints = MAX_HP;\n    this.fill = MAX_FILL;\n    this.visionRadius = VISION_RADIUS;\n    this.chromosomeInput = new Float32Array(CHROMOSOME_INPUT_LENGHT);\n  }\n\n  public onSexRequest(from:Creature){\n    if(from.type === EntityTypes.RABBIT_F ||\n        from.type === EntityTypes.RABBIT_M){\n          this.sexRequestedPartner = <Rabbit>from;\n        }\n  }\n\n  public onCoition(partner:Rabbit){\n    if(partner.type === EntityTypes.RABBIT_M &&\n    this.type  === EntityTypes.RABBIT_F &&\n    (!this.gestationChromosome) && this.age >= MIN_SEX_AGE){\n      this.gestationChromosome = this.chromosome.cross(partner.chromosome);\n      this.gestationChromosome.mutate();\n      this.gestationTime = 0;\n    }\n  }\n\n  public clone(mutationCount?:number, mutationPower?:number){\n    var newChromosome = this.chromosome.cross(this.chromosome);\n    if(mutationCount){\n      newChromosome.mutate(mutationCount, mutationPower);\n    }\n    var newRabbit = new Rabbit( Math.round(Math.random()),\n                    this.idFactoryMethod,\n                    ()=>{return newChromosome});\n    newRabbit.posX = this.posX;\n    newRabbit.posY = this.posY;\n    return newRabbit;\n  }\n\n  process(nearEntities:Entity[]){\n    this.age++;\n    this.fill--;\n    if(this.fill <=0){\n      this.healthPoints--;\n      this.fill = 0;\n    }else if (this.fill >= MAX_FILL/2){\n      this.healthPoints ++;\n    }\n    if(this.age>MAX_AGE || this.healthPoints <= 0){\n      this.die();\n      return;\n    }\n    if(this.gestationChromosome && (this.gestationTime++) > MAX_GESTATION_TIME){\n      var newRabbitChromosome = this.gestationChromosome;\n      this.gestationChromosome = undefined;\n      var newRabbit = new Rabbit( Math.round(Math.random()),\n                      this.idFactoryMethod,\n                      ()=>{return newRabbitChromosome});\n      newRabbit.posX = this.posX;\n      newRabbit.posY = this.posY;\n      this.onCreatureMade(newRabbit);\n    }\n    nearEntities.sort((a,b)=>{\n      var adx = this.posX - a.posX;\n      var ady = this.posY - a.posY;\n      var bdx = this.posX - b.posX;\n      var bdy = this.posY - b.posY;\n      return (adx*adx + ady*ady) - (bdx*bdx + bdy*bdy);\n    });\n    this.prepareInputs(nearEntities);\n    this.chromosome.setInput(this.chromosomeInput.buffer, 0);\n    var outputBuffer = this.chromosome.process();\n    var output = new Float32Array(outputBuffer);\n    var moveX = output[0];\n    var moveY = output[1];\n    var operation = findMaxElementIndex(output, 2, 10) - 2;\n    var param = findMaxElementIndex(output, 11, CHROMOSOME_OUTPUT_LENGTH - 1) - 11;\n    this.processOperation(operation, param, nearEntities);\n    this.move(moveX, moveY);\n  }\n\n  private prepareInputs(nearEntities:Entity[]){\n    const RECORD_SIZE = 8;\n    this.chromosomeInput.fill(0);\n    var entitiesToInput = Math.min(MAX_VISIBLE_OBJECTS_COUNT, nearEntities.length);\n    for(var i=0; i< entitiesToInput; i++){\n      this.chromosomeInput[i * RECORD_SIZE] = nearEntities[i].type & 1;\n      this.chromosomeInput[i * RECORD_SIZE + 1] = nearEntities[i].type & 2;\n      this.chromosomeInput[i * RECORD_SIZE + 2] = nearEntities[i].type & 4;\n      this.chromosomeInput[i * RECORD_SIZE + 3] = nearEntities[i].type & 8;\n      this.chromosomeInput[i * RECORD_SIZE + 4] = (nearEntities[i].posX - this.posX)/this.visionRadius;\n      this.chromosomeInput[i * RECORD_SIZE + 5] = (nearEntities[i].posY - this.posY)/this.visionRadius;\n      this.chromosomeInput[i * RECORD_SIZE + 6] = ((<Rabbit>nearEntities[i]).age || 0)/MAX_AGE;\n      this.chromosomeInput[i * RECORD_SIZE + 7] = ((<Rabbit>nearEntities[i]).isGestiation)?\n        +(<Rabbit>nearEntities[i]).isGestiation():0;\n    }\n    var positionAfterObjects = MAX_VISIBLE_OBJECTS_COUNT*RECORD_SIZE;\n    this.chromosomeInput[positionAfterObjects] = this.healthPoints/MAX_HP;\n    this.chromosomeInput[positionAfterObjects + 1] = this.age/MAX_AGE\n    this.chromosomeInput[positionAfterObjects + 2] = this.fill/MAX_FILL;\n    this.chromosomeInput[positionAfterObjects + 3] = (this.type === EntityTypes.RABBIT_M)?1:0;\n    this.chromosomeInput[positionAfterObjects + 4] = (this.gestationChromosome)?1:0;\n    this.chromosomeInput[positionAfterObjects + 5] = this.gestationTime/MAX_GESTATION_TIME;\n  }\n\n  private processOperation(operation:number, param:number, nearEntities:Entity[]){\n    switch(operation){\n      case 1:\n        if(nearEntities[param]){\n          this.EatObject(nearEntities[param]);\n        }\n      break;\n\n      case 2:\n        if(nearEntities[param]){\n          this.doSexRequest(nearEntities[param]);\n        }\n      break;\n\n      case 3:\n        this.approveSexRequest();\n      break;\n\n      default:\n      break;\n    }\n\n  }\n\n  private EatObject(object:Entity){\n    if(object.type === EntityTypes.FOOD_GRASS &&\n      this.getDistanceTo(object) <= this.actRadius){\n      this.fill = Math.max(this.fill + GRASS_FILL_POINTS, MAX_FILL);\n      this.onObjectPickup(object);\n    }\n  }\n\n  private die(){\n    this.isAlive = false;\n    //TODO drop items\n  }\n\n  private move(x:number, y:number){\n    var speed = Math.hypot(x,y);\n    if(speed > MAX_SPEED){\n      x /= (speed/MAX_SPEED);\n      y /= (speed/MAX_SPEED);\n    }\n    this.posX += x;\n    this.posY += y;\n  }\n\n  private doSexRequest(object:any){\n    if(object instanceof Rabbit\n    && this.getDistanceTo(object) <= this.actRadius\n    && this.age >= MIN_SEX_AGE){\n      object.onSexRequest(<Rabbit>this);\n    }\n  }\n\n  private approveSexRequest(){\n    if(this.sexRequestedPartner &&\n      this.getDistanceTo(this.sexRequestedPartner) < this.actRadius){\n      this.onCoition(this.sexRequestedPartner);\n      this.sexRequestedPartner.onCoition(this);\n    }\n  }\n\n  private getDistanceTo(entity:Entity){\n    return Math.hypot(this.posX - entity.posX, this.posY - entity.posY);\n  }\n\n  private isGestiation(){\n    return this.gestationChromosome?true:false;\n  }\n\n}\n\nfunction findMaxElementIndex(array:Float32Array, fromIndex:number, toIndex:Number){\n  var maxIndex = fromIndex;\n  for(var i = fromIndex+1; i<= toIndex; i++){\n    if(array[i] > array[maxIndex]){\n      maxIndex = i;\n    }\n  }\n  return maxIndex;\n}\n","export * from \"./Creature\";\nexport * from \"./Rabbit\";\n","\nexport class IdFactory{\n  private lastId = 0;\n\n  generateId():number{\n    this.lastId = (this.lastId + 1) % 0x100000000;\n    return this.lastId;\n  }\n}\n","module.exports = THREE;"],"sourceRoot":""}